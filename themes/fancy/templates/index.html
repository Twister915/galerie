{% extends "base.html" %}

{% block title %}{{ site.title }}{% endblock title %}

{% block head %}
<meta name="description" content="Photo gallery - {{ site.title }}">
<meta property="og:title" content="{{ site.title }}">
<meta property="og:type" content="website">
{% endblock head %}

{% block body %}
<!-- Site header -->
<header class="site-header">
    <a href="/" class="site-title">{{ site.title }}</a>
    {% if root.children %}
    <nav class="album-nav">
        {% for album in root.children %}
        <a href="#/album/{{ album.slug }}" class="album-link" data-album="{{ album.slug }}">{{ album.name }}</a>
        {% endfor %}
    </nav>
    {% endif %}
    {% if languages | length > 1 %}
    <div class="lang-dropdown" id="lang-dropdown">
        <button class="lang-dropdown-trigger" id="lang-dropdown-trigger" aria-haspopup="true" aria-expanded="false">
            <span class="lang-current" id="lang-current"></span>
            <svg class="lang-dropdown-arrow" width="10" height="6" viewBox="0 0 10 6" fill="none">
                <path d="M1 1L5 5L9 1" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
        </button>
        <div class="lang-dropdown-menu" id="lang-dropdown-menu" role="menu">
            {% for l in languages %}
            <button class="lang-dropdown-item" data-lang="{{ l.code }}" role="menuitem">{{ l.name }}</button>
            {% endfor %}
        </div>
    </div>
    {% endif %}
</header>

<!-- Main grid container -->
<main class="gallery" id="gallery">
    <div class="masonry-grid" id="masonry-grid">
        <!-- Photos injected by JS -->
    </div>
</main>

<footer class="site-footer">
    <span data-i18n="footer.built_with">Built with</span>
    <a href="https://github.com/Twister915/galerie" target="_blank" rel="noopener">galerie</a>
    <span class="version">{{ site.version }}</span>
    <span data-i18n="footer.built_with_suffix"></span>
</footer>

<!-- Photo viewer overlay -->
<div class="photo-viewer" id="photo-viewer" hidden>
    <div class="viewer-backdrop" id="viewer-backdrop"></div>

    <div class="viewer-controls">
        <button class="viewer-btn" id="slideshow-toggle" aria-label="Play slideshow">&#9654;</button>
        <button class="viewer-btn" id="big-picture-toggle" aria-label="Fullscreen mode">&#9974;</button>
        <button class="viewer-btn" id="drawer-toggle" aria-label="Toggle info">i</button>
        <button class="viewer-btn viewer-close" id="viewer-close" aria-label="Close">&times;</button>
    </div>

    <div class="viewer-main">
        <button class="viewer-nav viewer-prev" id="viewer-prev" aria-label="Previous">&lsaquo;</button>
        <div class="viewer-image-container">
            <img class="viewer-image active" id="viewer-image" alt="">
            <img class="viewer-image" id="viewer-image-next" alt="">
            <div class="viewer-progress" id="viewer-progress">
                <div class="viewer-progress-bar" id="viewer-progress-bar"></div>
            </div>
        </div>
        <button class="viewer-nav viewer-next" id="viewer-next" aria-label="Next">&rsaquo;</button>
    </div>

    <!-- Info drawer -->
    <aside class="info-drawer" id="info-drawer">
        <div class="drawer-content" id="drawer-content">
            <!-- Populated by JS -->
        </div>
    </aside>

    <!-- Filmstrip -->
    <nav class="filmstrip" id="filmstrip">
        <!-- Populated by JS -->
    </nav>
</div>

<!-- Photo and i18n data loaded asynchronously from JSON files -->
{% endblock body %}
